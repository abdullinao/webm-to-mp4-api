<h1> Сервис для конвертации видео</h1>
СЕРВИС ПЛАТФОРМОЗАВИСИМЫЙ! ПОЛНОЦЕННАЯ РАБОТА ВОЗМОЖНО ТОЛЬКО НА WINDOWS

на текущий момент реализована конвертация WEBM в MP4

<h2>Запуск сервиса на своем хосте</h2>
скачать BUILD.zip, поменять в application.properties порт для приложения (стандартный порт - 5001)
запустить run.bat

<h2>Использование сервиса</h2>
Для получения webm конвертированной в mp4 необходимо отправить GET запрос следующего вида:

http://{HOST}:{ПОРТ ИЗ application.properties}/webm2mp4/{urlInB64}

urlInB64 - урл до вебм закодированный в BASE64, например "https://test.io/webmfile.webm" - "aHR0cHM6Ly90ZXN0LmlvL3dlYm1maWxlLndlYm0="

Пример готового запроса:

127.0.0.1:5001/webm2mp4/aHR0cHM6Ly90ZXN0LmlvL3dlYm1maWxlLndlYm0=

В результате сервис вернет файл в формате mp4, без расширения. Т.е. на стороне клиента нужно добавить .mp4 к файлу, полученному от этого сервиса.

<h2>Как происходит конвертация видео?</h2>
Для конвертации используется внешний конвертер - https://www.ffmpeg.org/ _(все права принадлежат авторам этого продукта, перед использованием сервиса проконсультируйтесь с юристами\своим лечащим врачом)_

1. при получении ссылки на вебм программа скачивает вебм в папку videos\toconvert\имявебм.webm
   
2. в консоли windows вызывается  ffmpeg.exe с параметрами "-y -i videos/toconvert/%filename% -strict experimental -vf "crop=trunc(iw/2)*2:trunc(ih/2)*2" -r 24  videos/toupload/%filename%.mp4" 
полученный файл сохраняется в videos\toupload\
   
после завершеня передачи файла клиенту на стороне сервиса удаляется конвертируемый и сконвертированный файл.

